<!DOCTYPE html>
<html lang="zh-CN"><head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta
        name="viewport"
        content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"
    />
    <meta name="keywords" content="pengjielee,个人博客" />
    <meta name="description" content="Pengjielee的个人博客" />
    <title>Pengjielee&#39;s blog</title>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700" />
    <link rel="stylesheet" href="/css/monokai-sublime.min.css" />
    <link rel="stylesheet" href="/css/style.css" />
</head>
<body>
        <div id="main">
            <nav class="nav">
    <a href="/">首页</a> <span class="divide">|</span>
    <a href="/categories">分类</a>
    <span class="divide">|</span> <a href="/tags">标签</a>
    <span class="divide">|</span>
    <a href="/post">归档</a>
</nav>

    <div class="page page-single">
        <header class="header">
            <h1 class="title">redis基础</h1><div class="post-meta">
    <div class="date">2023-03-24</div>
        <div class="tags">
            <label class="label">Tags：</label>
                <a class="link" href="/tags/redis/" rel="tag">redis</a>
        </div>
</div>
</header>
        <div class="content"><h2 id="redis">Redis</h2>
<p>Redis（remote dictionary server）是一个基于KEY-VALUE的高性能的存储系统</p>
<h2 id="docker安装redis">Docker安装redis</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ docker pull redis
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ docker run --name myredis -d -p 6379:6379 redis
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ docker ps
</span></span><span style="display:flex;"><span>CONTAINER ID   IMAGE     COMMAND                  CREATED          STATUS          PORTS                    NAMES
</span></span><span style="display:flex;"><span>c92daf4edbfe   redis     <span style="color:#e6db74">&#34;docker-entrypoint.s…&#34;</span>   <span style="color:#ae81ff">32</span> seconds ago   Up <span style="color:#ae81ff">32</span> seconds   0.0.0.0:6379-&gt;6379/tcp   myredis
</span></span></code></pre></div><h2 id="连接redis">连接redis</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>$ redis-cli -v
</span></span><span style="display:flex;"><span>redis-cli 7.0.9
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ redis-cli
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt;
</span></span></code></pre></div><h2 id="字符串">字符串</h2>
<p>1、设置和获取键值对：get / set</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; set name jim
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; get name
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;jim&#34;</span>
</span></span></code></pre></div><p>2、查询是否存在和查询所有键： exists / keys</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; exists name
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; exists age
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; keys *
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;name&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; set sex male
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; get sex
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;male&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; keys *
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;sex&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;name&#34;</span>
</span></span></code></pre></div><p>3、删除键值对：del</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; keys *
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;sex&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;name&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; del name
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; get name
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>nil<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; keys *
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;sex&#34;</span>
</span></span></code></pre></div><p>4、批量设置键值对：mset / mget</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; flushdb
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; keys *
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>empty array<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; mset name jim sex male
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; mget name sex
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;jim&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;male&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; keys *
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;sex&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;name&#34;</span>
</span></span></code></pre></div><p>5、设置过期时间：expire</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; keys *
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>empty array<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; set name jim
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; get name
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;jim&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; expire name <span style="color:#ae81ff">5</span>  <span style="color:#75715e">#5s后过期            </span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; get name       <span style="color:#75715e">#等待5s</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>nil<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>6、计数</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; set num <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; incr num
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; get num
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; incr num
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; get num
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; incrby num <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">13</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; get num
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;13&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; decr num
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">12</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; decr num
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">11</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; get num
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;11&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; decrby num <span style="color:#ae81ff">5</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">6</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; get num
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;6&#34;</span>
</span></span></code></pre></div><p>7、为 key 设置一个值并返回原值：getset</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; flushdb
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; set name jim
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; getset name tom
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;jim&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; get name
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;tom&#34;</span>
</span></span></code></pre></div><h2 id="列表">列表</h2>
<p>1、向 list 的左边（头部）添加元素：lpush</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; flushdb
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lpush nums <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lpush nums <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lpush nums <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lrange nums <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>3<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;1&#34;</span>
</span></span></code></pre></div><p>2、向 list 的右边（尾部）添加元素：rpush</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; flushdb
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; rpush nums <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; rpush nums <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; rpush nums <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lrange nums <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>3<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;3&#34;</span>
</span></span></code></pre></div><p>3、从 list 中取出指定下表的元素： lindex</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; lrange nums <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>3<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lindex nums <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lindex nums <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lindex nums <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lindex nums <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>nil<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lindex nums <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>nil<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>4、list 实现队列</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; flushdb
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; rpush nums <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lrange nums <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>3<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lpop nums
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lpop nums
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lpop nums
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lpop nums
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>nil<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lrange nums <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>empty array<span style="color:#f92672">)</span>
</span></span></code></pre></div><p>5、list 实现栈</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; flushdb
</span></span><span style="display:flex;"><span>OK clear
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; rpush nums <span style="color:#ae81ff">1</span> <span style="color:#ae81ff">2</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; lrange nums <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">10</span>
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>3<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; rpop nums
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;3&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; rpop nums
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;2&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; rpop nums
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;1&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; rpop nums
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>nil<span style="color:#f92672">)</span>
</span></span></code></pre></div><h2 id="字典">字典</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; flushdb
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; hset people name jim
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; hset people age <span style="color:#ae81ff">20</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; hset people address beijing
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; hgetall people                         <span style="color:#75715e"># key 和 value 间隔出现</span>
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;name&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;jim&#34;</span>
</span></span><span style="display:flex;"><span>3<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;age&#34;</span> 
</span></span><span style="display:flex;"><span>4<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;20&#34;</span>
</span></span><span style="display:flex;"><span>5<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;address&#34;</span>
</span></span><span style="display:flex;"><span>6<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;beijing&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; hget people name
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;jim&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; hset people name tom                   <span style="color:#75715e"># 因为是更新操作，所以返回 0</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; hget people name
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;tom&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; hmset people sex male phone <span style="color:#ae81ff">18614023236</span> <span style="color:#75715e"># 批量操作</span>
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; hgetall people
</span></span><span style="display:flex;"><span> 1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;name&#34;</span>
</span></span><span style="display:flex;"><span> 2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;tom&#34;</span>
</span></span><span style="display:flex;"><span> 3<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;age&#34;</span>
</span></span><span style="display:flex;"><span> 4<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;20&#34;</span>
</span></span><span style="display:flex;"><span> 5<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;address&#34;</span>
</span></span><span style="display:flex;"><span> 6<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;beijing&#34;</span>
</span></span><span style="display:flex;"><span> 7<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;sex&#34;</span>
</span></span><span style="display:flex;"><span> 8<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;male&#34;</span>
</span></span><span style="display:flex;"><span> 9<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;phone&#34;</span>
</span></span><span style="display:flex;"><span>10<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;18614023236&#34;</span>
</span></span></code></pre></div><h2 id="集合">集合</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; flushdb
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; keys *
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>empty array<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; sadd books java
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; sadd books java           <span style="color:#75715e"># 重复添加</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; smembers books。          <span style="color:#75715e"># 查看集合元素</span>
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;java&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; sadd books golang         <span style="color:#75715e"># 再次添加</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; sadd books javascript nodejs <span style="color:#75715e"># 再次添加</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; smembers books            <span style="color:#75715e"># 查看集合元素</span>
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;javascript&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;golang&#34;</span>
</span></span><span style="display:flex;"><span>3<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;nodejs&#34;</span>
</span></span><span style="display:flex;"><span>4<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;java&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; sadd books golang          <span style="color:#75715e"># 重复添加</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">0</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; sismember books java       <span style="color:#75715e"># 查询某个 value 是否存在，相当于 contains</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; scard books                <span style="color:#75715e"># 获取长度</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">4</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; spop books                 <span style="color:#75715e"># 弹出一个</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;nodejs&#34;</span>
</span></span></code></pre></div><h2 id="有序列表">有序列表</h2>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>127.0.0.1:6379&gt; flushdb
</span></span><span style="display:flex;"><span>OK
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; zadd books 9.1 <span style="color:#e6db74">&#34;think in java&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; zadd books 9.3 <span style="color:#e6db74">&#34;think in java2&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; zadd books 8.2 <span style="color:#e6db74">&#34;go lang program&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; zrange books <span style="color:#ae81ff">0</span> -1      <span style="color:#75715e"># 按 score 排序列出(正序)，参数区间为排名范围</span>
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;go lang program&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;think in java&#34;</span>
</span></span><span style="display:flex;"><span>3<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;think in java2&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; zrevrange books <span style="color:#ae81ff">0</span> -1   <span style="color:#75715e"># 按 score 逆序列出，参数区间为排名范围</span>
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;think in java2&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;think in java&#34;</span>
</span></span><span style="display:flex;"><span>3<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;go lang program&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; zcard books             <span style="color:#75715e"># 相当于 count()</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">3</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; zscore books <span style="color:#e6db74">&#34;think in java&#34;</span>      <span style="color:#75715e"># 获取指定 value 的 score</span>
</span></span><span style="display:flex;"><span><span style="color:#e6db74">&#34;9.0999999999999996&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; zrank books <span style="color:#e6db74">&#34;think in java&#34;</span>       <span style="color:#75715e"># 内部 score 使用 double 类型进行存储，所以存在小数点精度问题</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; zrank books <span style="color:#e6db74">&#34;think in java2&#34;</span>      <span style="color:#75715e"># 排名</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">2</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; zrangebyscore books <span style="color:#ae81ff">0</span> <span style="color:#ae81ff">9</span>          <span style="color:#75715e"># 根据分值区间遍历 zset</span>
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;go lang program&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; zrangebyscore books -inf 9.2 withscores   <span style="color:#75715e"># 根据分值区间 (-∞, 8.91] 遍历 zset，同时返回分值。inf 代表 infinite，无穷大的意思。</span>
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;go lang program&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;8.1999999999999993&#34;</span>
</span></span><span style="display:flex;"><span>3<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;think in java&#34;</span>
</span></span><span style="display:flex;"><span>4<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;9.0999999999999996&#34;</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; zrem books <span style="color:#e6db74">&#34;think in java&#34;</span>          <span style="color:#75715e"># 删除 value</span>
</span></span><span style="display:flex;"><span><span style="color:#f92672">(</span>integer<span style="color:#f92672">)</span> <span style="color:#ae81ff">1</span>
</span></span><span style="display:flex;"><span>127.0.0.1:6379&gt; zrange books <span style="color:#ae81ff">0</span> -1
</span></span><span style="display:flex;"><span>1<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;go lang program&#34;</span>
</span></span><span style="display:flex;"><span>2<span style="color:#f92672">)</span> <span style="color:#e6db74">&#34;think in java2&#34;</span>
</span></span></code></pre></div></div>
    </div>

        </div><script src="/js/highlight.min.js"></script>
<script type="text/javascript">
    document.addEventListener("DOMContentLoaded", (event) => {
        document.querySelectorAll("pre").forEach((block) => {
            hljs.highlightBlock(block);
        });
        
        
        
        
        
        
        
        
        
        
    });
</script>
</body>
</html>
